<style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
        background-color: #000;
        border-radius: 10px;
        padding: 20px;
        width: 500px;
        height: 350px;
        margin: 20px;
        color: #fff;
        font-family: 'Segoe UI';
    }
    .sub-container {
        background-color: #333;
        border-radius: 5px;
        padding: 10px;
        width: 90%;
        height: 30px;
        margin: 10px;
        color: #fff;
        font-family: 'Segoe UI';
        position: relative;
        cursor: pointer;
    }
    .sub-container::after {
        content: '\25BC';
        position: absolute;
        right: 10px;
        top: 45%;
        transform: translateY(-50%);
        color: #fff;
        font-size: 12px;
    }
    .sub-container ul li::before {
        content: '\2022'; /* Unicode for bullet point */
        margin-right: 10px;
        color: #fff;
    }
    .sub-container:hover::after {
        transform: translateY(-50%) rotate(180deg);
    }
    .sub-container ul {
        display: none;
        position: absolute;
        top: 60px;
        left: 0;
        background-color: #333;
        border-radius: 5px;
        padding: 10px;
        width: 96%;
        margin: 0;
        color: #fff;
        font-family: 'Segoe UI';
        list-style: none;
        height: 200px; 
        overflow-y: auto; 
        overflow-x: hidden;
    }
    .sub-container ul li {
        padding: 10px;
        border-bottom: 1px solid #444;
        width: 100%;
        cursor: pointer;
    }
    .sub-container ul li:hover {
        background-color: #444;
    }
    .arrow-icon {
        font-size: 24px;
        color: #000;
        cursor: pointer;
        margin: 20px;
    }
    .text {
        font-size: 20px;
        margin-left: 20px;
    }
    .textarea {
        width: 94%;
        height: 200px;
        padding: 10px;
        margin: 10px;
        font-size: 16px;
        color: #fff;
        background-color: #333;
        border: none;
        border-radius: 5px;
    }
    .readonly-textarea {
        width: 94%;
        height: 200px;
        padding: 10px;
        margin: 10px;
        font-size: 16px;
        color: #aaa;
        background-color: #333;
        border: none;
        border-radius: 5px;
        pointer-events: auto;
    }
    .go-button {
        background-color: #007bff; 
        color: #fff; 
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        margin: 20px;
    }

    .go-button:hover {
        background-color: #0069d9; 
    }
</style>
  
<div class="container">
  <div class="sub-container">Detect Language
        <ul>
            <li>Afrikaans</li>
            <li>Albanian</li>
            <li>Amharic</li>
            <li>Arabic</li>
            <li>Armenian</li>
            <li>Azerbaijani</li>
            <li>Basque</li>
            <li>Belarusian</li>
            <li>Bengali</li>
            <li>Bosnian</li>
            <li>Bulgarian</li>
            <li>Catalan</li>
            <li>Cebuano</li>
            <li>Chichewa</li>
            <li>Chinese</li>
            <li>Corsican</li>
            <li>Croatian</li>
            <li>Czech</li>
            <li>Danish</li>
            <li>Dutch</li>
            <li>English</li>
            <li>Esperanto</li>
            <li>Estonian</li>
            <li>Filipino</li>
            <li>Finnish</li>
            <li>French</li>
            <li>Frisian</li>
            <li>Galician</li>
            <li>Georgian</li>
            <li>German</li>
            <li>Greek</li>
            <li>Gujarati</li>
            <li>Haitian Creole</li>
            <li>Hausa</li>
            <li>Hawaiian</li>
            <li>Hebrew</li>
            <li>Hindi</li>
            <li>Hmong</li>
            <li>Hungarian</li>
            <li>Icelandic</li>
            <li>Igbo</li>
            <li>Indonesian</li>
            <li>Irish</li>
            <li>Italian</li>
            <li>Japanese</li>
            <li>Javanese</li>
            <li>Kannada</li>
            <li>Kazakh</li>
            <li>Khmer</li>
            <li>Kinyarwanda</li>
            <li>Korean</li>
            <li>Kurdish</li>
            <li>Kyrgyz</li>
            <li>Lao</li>
            <li>Latin</li>
            <li>Latvian</li>
            <li>Lingala</li>
            <li>Lithuanian</li>
            <li>Luxembourgish</li>
            <li>Macedonian</li>
            <li>Malagasy</li>
            <li>Malay</li>
            <li>Malayalam</li>
            <li>Maltese</li>
            <li>Maori</li>
            <li>Marathi</li>
            <li>Mongolian</li>
            <li>Myanmar (Burmese)</li>
            <li>Nepali</li>
            <li>Norwegian</li>
            <li>Nyanja (Chichewa)</li>
            <li>Odia (Oriya)</li>
            <li>Pashto</li>
            <li>Polish</li>
            <li>Portuguese</li>
            <li>Punjabi</li>
            <li>Romanian</li>
            <li>Russian</li>
            <li>Samoan</li>
            <li>Scots Gaelic</li>
            <li>Serbian</li>
            <li>Sesotho</li>
            <li>Shona</li>
            <li>Sindhi</li>
            <li>Sinhala</li>
            <li>Slovak</li>
            <li>Slovenian</li>
            <li>Somali</li>
            <li>Spanish</li>
            <li>Sundanese</li>
            <li>Swahili</li>
            <li>Swedish</li>
            <li>Tajik</li>
            <li>Tamil</li>
            <li>Tatar</li>
            <li>Telugu</li>
            <li>Thai</li>
            <li>Turkish</li>
            <li>Ukrainian</li>
            <li>Urdu</li>
            <li>Uyghur</li>
            <li>Uzbek</li>
            <li>Vietnamese</li>
            <li>Welsh</li>
            <li>Xhosa</li>
            <li>Yiddish</li>
            <li>Yoruba</li>
            <li>Zulu</li>
        </ul>
    </div>
    <textarea class="textarea" placeholder="Type or Paste"></textarea>
</div>
<span class="arrow-icon">&#8644;</span>
<button class="go-button">Go</button>
<div class="container">
    <div class="sub-container">Select Language
        <ul>
            <li>Afrikaans</li>
            <li>Albanian</li>
            <li>Amharic</li>
            <li>Arabic</li>
            <li>Armenian</li>
            <li>Azerbaijani</li>
            <li>Basque</li>
            <li>Belarusian</li>
            <li>Bengali</li>
            <li>Bosnian</li>
            <li>Bulgarian</li>
            <li>Catalan</li>
            <li>Cebuano</li>
            <li>Chichewa</li>
            <li>Chinese</li>
            <li>Corsican</li>
            <li>Croatian</li>
            <li>Czech</li>
            <li>Danish</li>
            <li>Dutch</li>
            <li>English</li>
            <li>Esperanto</li>
            <li>Estonian</li>
            <li>Filipino</li>
            <li>Finnish</li>
            <li>French</li>
            <li>Frisian</li>
            <li>Galician</li>
            <li>Georgian</li>
            <li>German</li>
            <li>Greek</li>
            <li>Gujarati</li>
            <li>Haitian Creole</li>
            <li>Hausa</li>
            <li>Hawaiian</li>
            <li>Hebrew</li>
            <li>Hindi</li>
            <li>Hmong</li>
            <li>Hungarian</li>
            <li>Icelandic</li>
            <li>Igbo</li>
            <li>Indonesian</li>
            <li>Irish</li>
            <li>Italian</li>
            <li>Japanese</li>
            <li>Javanese</li>
            <li>Kannada</li>
            <li>Kazakh</li>
            <li>Khmer</li>
            <li>Kinyarwanda</li>
            <li>Korean</li>
            <li>Kurdish</li>
            <li>Kyrgyz</li>
            <li>Lao</li>
            <li>Latin</li>
            <li>Latvian</li>
            <li>Lingala</li>
            <li>Lithuanian</li>
            <li>Luxembourgish</li>
            <li>Macedonian</li>
            <li>Malagasy</li>
            <li>Malay</li>
            <li>Malayalam</li>
            <li>Maltese</li>
            <li>Maori</li>
            <li>Marathi</li>
            <li>Mongolian</li>
            <li>Myanmar (Burmese)</li>
            <li>Nepali</li>
            <li>Norwegian</li>
            <li>Nyanja (Chichewa)</li>
            <li>Odia (Oriya)</li>
            <li>Pashto</li>
            <li>Polish</li>
            <li>Portuguese</li>
            <li>Punjabi</li>
            <li>Romanian</li>
            <li>Russian</li>
            <li>Samoan</li>
            <li>Scots Gaelic</li>
            <li>Serbian</li>
            <li>Sesotho</li>
            <li>Shona</li>
            <li>Sindhi</li>
            <li>Sinhala</li>
            <li>Slovak</li>
            <li>Slovenian</li>
            <li>Somali</li>
            <li>Spanish</li>
            <li>Sundanese</li>
            <li>Swahili</li>
            <li>Swedish</li>
            <li>Tajik</li>
            <li>Tamil</li>
            <li>Tatar</li>
            <li>Telugu</li>
            <li>Thai</li>
            <li>Turkish</li>
            <li>Ukrainian</li>
            <li>Urdu</li>
            <li>Uyghur</li>
            <li>Uzbek</li>
            <li>Vietnamese</li>
            <li>Welsh</li>
            <li>Xhosa</li>
            <li>Yiddish</li>
            <li>Yoruba</li>
            <li>Zulu</li>
        </ul>
    </div>
    <textarea class="readonly-textarea" readonly placeholder="Translated Text"></textarea>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function() {
      const subContainers = document.querySelectorAll('.sub-container');
      const textarea = document.querySelector('.textarea');
      const readonlyTextarea = document.querySelector('.readonly-textarea');
      const goButton = document.querySelector('.go-button');
      const swapButton = document.querySelector('.arrow-icon');
      let targetLanguage = '';
      
      function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
              break;
            }
          }
        }
        return cookieValue;
      }

      subContainers.forEach(container => {
          const ul = container.querySelector('ul');
          const items = ul.querySelectorAll('li');
          let isOpen = false;

          container.addEventListener('click', function() {
              if (!isOpen) {
                  ul.style.display = 'block';
                  isOpen = true;
              } else {
                  ul.style.display = 'none';
                  isOpen = false;
              }
          });

          items.forEach(item => {
              item.addEventListener('click', function(event) {
                  event.stopPropagation(); 
                  container.firstChild.textContent = `${item.textContent.trim()}`;
                  ul.style.display = 'none';
                  isOpen = false;
              });
          });
      });

      document.addEventListener('click', function(event) {
          subContainers.forEach(container => {
              const ul = container.querySelector('ul');
              if (!container.contains(event.target)) {
                  ul.style.display = 'none';
                  isOpen = false;
              }
          });
      });

      goButton.addEventListener('click', function() {
          const text = textarea.value;
          const languageSelectContainer = subContainers[1];
          const secondLang = subContainers[0];
          const selectedLanguage = languageSelectContainer.firstChild.textContent.trim();
          const firstSelect = secondLang.firstChild.textContent.trim();
          console.log('Text:', text);
          console.log('Selected Language:', selectedLanguage);
          console.log('First Language:', firstSelect);


          if (text && selectedLanguage) {
              const formData = new FormData();
              formData.append('text', text);
              formData.append('first_language', firstSelect)
              formData.append('target_language', selectedLanguage);

              const data = {};
              for (var key of formData.entries()) {
                  data[key[0]] = key[1];
              }

              const csrfToken = getCookie('csrftoken');
              console.log(csrfToken)
              console.log(JSON.stringify(data))
              fetch('/translate/', {
                  method: 'POST', 
                  headers: {
                      'Content-Type': 'application/json',
                      'X-CSRFToken': csrfToken
                  },
                  body: JSON.stringify(data)  
              })
              .then(response => response.json())  
              .then(data => {
                  console.log(data.translation);  
                  console.log(data.first);
                  readonlyTextarea.value = data.translation;
                  subContainers[0].firstChild.textContent = data.first;
              })
          }
      });
      swapButton.addEventListener('click', function() {
        console.log(readonlyTextarea.value);
        console.log('Button clicked');
        console.log('Textarea value before:', textarea.value);
        console.log('Readonly textarea value before:', readonlyTextarea.value);

        if (textarea.value && (readonlyTextarea.value.trim() !== '')) {
            console.log('Condition met');
            const text = textarea.value;
            const rtext = readonlyTextarea.value;
            textarea.value = rtext;
            readonlyTextarea.value = text;

            console.log('Textarea value after:', textarea.value);
            console.log('Readonly textarea value after:', readonlyTextarea.value);
        } else {
            console.log('Condition not met');
        }
    });
  }); 
</script>
